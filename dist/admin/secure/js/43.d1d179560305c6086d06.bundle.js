(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{410:function(e,t,n){"use strict";n.r(t);var i=n(13),a=(n(10),n(1)),r=n(65),s=n(0),l=(n(5),n(81),n(2)),c=n(26),o=n(38),b=n.n(o),d=n(201),u=n(9),j=n(52),f=(n(217),n(238)),O=n(129);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m({listKey:e,value:t,onAddUser:n,many:i,isDisabled:r}){const s="authenticated"+e,{data:o}=Object(c.b)(b.a`
    query User {
      ${s} {
        _label_
        id
      }
    }
  `);if(o&&o[s]){const e=o[s].id;if(null!==t&&(i?t.some(t=>t.id===e):t.id===e))return null;const c=`${i?"Add":"Set as"} ${o[s]._label_}`;return Object(a.jsx)(j.a,{placement:"top",content:c},e=>Object(a.jsx)(u.b,{css:{marginLeft:l.d},variant:"ghost",ref:e,onClick:()=>{n(o[s])},icon:d.g,"aria-label":c,isDisabled:r}))}return null}function y({field:e,value:t}){const{many:n}=e.config,{fullPath:i}=e.getRefList();let r,s=!1,c=i;return n?(r="View List of Related Items",t.length||(s=!0),c=`${c}?!id_in="${t.slice(0,100).map(({id:e})=>e).join(",")}"`):(r="View Item Details",t?c=`${c}/${t.id}`:s=!0),Object(a.jsx)(j.a,{placement:"top",content:r},e=>Object(a.jsx)(u.b,{ref:e,icon:d.e,"aria-label":r,variant:"ghost",css:{marginLeft:l.d},target:"_blank",to:c,isDisabled:s}))}function h({field:e,item:t,onCreate:n,isDisabled:i}){const{list:r,openCreateItemModal:c}=Object(O.e)();let o,b=e.getRefList(),f="Create and add "+b.singular;return t&&t.id&&(o=b.fields.filter(t=>"Relationship"===t.type&&t.config.ref===r.key&&t.config.refFieldPath===e.path).reduce((e,n)=>{const i={_label_:t._label_||"<link to parent>",id:t.id};return g(g({},e),{},{[n.path]:n.config.many?[i]:i})},{})),Object(a.jsx)(s.Fragment,null,Object(a.jsx)(j.a,{placement:"top",content:f},e=>Object(a.jsx)(u.b,{ref:e,onClick:c,icon:d.h,"aria-label":f,variant:"ghost",css:{marginLeft:l.d},isDisabled:i})),Object(a.jsx)(O.a,{prefillData:o,onCreate:({data:e})=>{n(e[b.gqlNames.createMutationName])}}))}t.default=({autoFocus:e,field:t,value:n=[],renderContext:i,errors:s,onChange:l,item:c,list:o,isDisabled:b})=>{const{many:d,ref:u}=t.config,{authStrategy:j}=Object(O.d)(),p="ks-input-"+t.path,g=t.getRefList();return Object(a.jsx)(r.a,null,Object(a.jsx)(r.d,{htmlFor:p,field:t,errors:s}),Object(a.jsx)(r.b,{text:t.adminDoc}),Object(a.jsx)(r.c,null,Object(a.jsx)("div",{css:{flex:1}},Object(a.jsx)(f.a,{autoFocus:e,isMulti:d,field:t,value:n,errors:s,renderContext:i,htmlID:p,onChange:e=>{const{many:n}=t.config;l(n?e?e.map(e=>e.value):[]:e?e.value:null)},isDisabled:b})),Object(a.jsx)(O.b,{list:g},Object(a.jsx)(h,{onCreate:e=>{l(d?n.concat(e):e)},field:t,item:c,list:o,isDisabled:b})),j&&u===j.listKey&&Object(a.jsx)(m,{many:d,onAddUser:e=>{l(d?n.concat(e):e)},value:n,listKey:j.listKey,isDisabled:b}),Object(a.jsx)(y,{field:t,value:n})))}}}]);